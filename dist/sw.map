{"version":3,"sources":["log.js","onInstall.js","onActivate.js","getRequestType.js","onFetch.js","index.js"],"names":["FILLER_LENGTH","MAX_PAYLOAD_LENGTH","log","str","payload","filler","repeat","length","console","payloadStr","substr","cacheFiles","now","after","onInstall","e","waitUntil","cache","self","caches","open","cacheName","addAll","onActivate","Promise","cacheNames","keys","all","filter","map","delete","urls","getRequestType","url","startsWith","indexOf","onFetch","request","requestType","skipSW","includes","fetch","respondWith","match","cachedResponse","networkResponse","put","clone","addEventListener"],"mappings":"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","file":"sw.map","sourceRoot":"../../_root/public/sw","sourcesContent":["\nconst FILLER_LENGTH = 55;\nconst MAX_PAYLOAD_LENGTH = 40;\n\nexport function log(str, payload) {\n\n  const filler = '-'.repeat(FILLER_LENGTH - str.length);\n  if (!payload) return console.log(`[SW] ${filler}> ${str}`);\n\n  if (typeof payload !== 'string') return console.log(`[SW] ${filler}> ${str} `, payload);\n\n  if (payload.length < MAX_PAYLOAD_LENGTH) return console.log(`[SW] ${filler}> ${str} `, payload);\n\n  const payloadStr = payload.substr(payload.length - MAX_PAYLOAD_LENGTH, 1000);\n  return console.log(`[SW] ${filler}> ${str} `, payloadStr);\n\n}\n\n\n","\n/* global self */\nimport { log } from './log';\n\nconst cacheFiles = {\n  now: [\n    './app.js',\n    './index.html',\n    'https://fonts.googleapis.com/css?family=Source+Sans+Pro',\n    '../icons/favicon.ico'\n  ],\n  after: [\n    // icons\n    '../icons/android-chrome-192x192.png',\n    '../icons/android-chrome-256x256.png',\n    '../icons/android-chrome-512x512.png',\n    '../icons/apple-touch-icon-57x57.png',\n    '../icons/apple-touch-icon-60x60.png',\n    '../icons/apple-touch-icon-72x72.png',\n    '../icons/apple-touch-icon-76x76.png',\n    '../icons/apple-touch-icon-114x114.png',\n    '../icons/apple-touch-icon-120x120.png',\n    '../icons/apple-touch-icon-144x144.png',\n    '../icons/apple-touch-icon-152x152.png',\n    '../icons/apple-touch-icon-180x180.png',\n    '../icons/favicon-32x32.png',\n    '../icons/favicon-16x16.png',\n    // splash\n    '../splash/iphone5_splash.png',\n    '../splash/iphone6_splash.png',\n    '../splash/iphoneplus_splash.png',\n    '../splash/iphonex_splash.png',\n    '../splash/iphonexr_splash.png',\n    '../splash/iphonexsmax_splash.png',\n    '../splash/ipad_splash.png',\n    '../splash/ipadpro1_splash.png',\n    '../splash/ipadpro3_splash.png',\n    '../splash/ipadpro2_splash.png',\n  ],\n};\n\n\n\nexport function onInstall(e) {\n\n  e.waitUntil((\n    async () => {\n      const cache = self.caches.open(self.cacheName);\n      if (!cache) return log('Install: Error');\n      log('Installed');\n      cache.addAll(cacheFiles.after);\n      return await cache.addAll(cacheFiles.now);\n    }\n  )());\n\n}\n","\n/* global self */\nimport { log } from './log';\n\nexport function onActivate(e) {\n\n  e.waitUntil((\n    async () => {\n      log('Activated');\n      const cacheNames = self.caches.keys();\n      return await Promise.all(\n        cacheNames\n        .filter(cacheName => cacheName !== self.cacheName)\n        .map(cacheName => {\n          log('Removing cached files from ', cacheName);\n          self.caches.delete(cacheName);\n        })\n      );\n    }\n  )());\n\n}\n\n\n\n","\n\nconst urls = [ 'https://museeker.io', 'http://localhost' ];\n\nexport function getRequestType(url) {\n\n  const isSameOrigin = url.startsWith(urls[0]) || url.startsWith(urls[1]);\n  if (!isSameOrigin) return 'external';\n\n  const isApi = url.indexOf('/api/') >= 0;\n  if (isApi) return 'api';\n\n  const isBase = url.indexOf('/base-') >= 0;\n  if (isBase) return 'base';\n\n  const isImage = url.indexOf('/icons/') >= 0 || url.indexOf('/splash/') >= 0;\n  if (isImage) return 'image';\n\n  return 'page';\n\n}\n\n\n","\n/* global self */\nimport { log } from './log';\nimport { getRequestType } from './getRequestType';\n\nexport function onFetch(e) {\n\n  const url = e.request.url;\n  const requestType = getRequestType(url);\n  const skipSW = [ 'page', 'api' ].includes(requestType);\n  log('RequestType', requestType);\n\n  if (skipSW) return self.fetch(e.request);\n\n  e.respondWith((\n    async () => {\n      log('Fetching', url);\n\n      const cache = await self.caches.open(self.cacheName);\n      const cachedResponse = await cache.match(e.request);\n      if (cachedResponse) return cachedResponse;\n      const networkResponse = await self.fetch(e.request);\n      e.waitUntil(\n        cache.put(e.request, networkResponse.clone())\n      );\n      return networkResponse;\n    }\n  )());\n\n}\n\n\n","\n/* global self */\n\nimport { onInstall } from './onInstall';\nimport { onActivate } from './onActivate';\nimport { onFetch } from './onFetch';\n\nself.cacheName = 'v1';\n\nself.addEventListener('install', onInstall);\nself.addEventListener('activate', onActivate);\nself.addEventListener('fetch', onFetch);\n\n"]}